!function(t,e,n){var a,o,r,i={},c=function(n,a){if(c.tmplCache||(c.tmplCache={}),!c.tmplCache[n]){var o;e.ajax({url:n,method:"GET",async:!1,success:function(t){o=t}}),c.tmplCache[n]=t.compile(o)}return c.tmplCache[n](a)},l=function(t,n){var a=e(i.cardSelector);a.length<=n?e(i.parentSelector).append(t):t.insertBefore(a[n])},d=function(t,n,r){var c,l,d=e(i.parentSelector).width(),s=t.outerWidth(!0),p=t.outerHeight(!0);r[t[0].id]={height:p,width:s};var u=Math.max(1,Math.floor(d/s));if(a=u*s,o=s,s>d)c=0,l=n*p;else if(c=n%u*s,l=0,n>=u)for(var f=e(i.cardSelector),h=n%u;n>h;h+=u)l+=r[f[h].id].height;return{top:l,left:c}},s=function(t,e,n){var a=50;t.css("z-index",a-e);var o=d(t,e,n);t.attr("new")?(t.attr("new",null),t.css("left",o.left+"px"),t.css("top",o.top+"px"),t.transition({opacity:1},i.animationDuration)):t.transition({left:o.left,top:o.top},i.animationDuration)},p={initialize:function(t){i=t,"animationDuration"in i||(i.animationDuration=500),e(window).resize(function(){(e(i.parentSelector).width()<a||e(i.parentSelector).width()>=a+o)&&p.layoutCards()})},setCards:function(t,n){console.log("Appending cards",t),t.forEach(function(t,a){var o=e("#"+t.documentid);if(o.length)l(o,a);else{var r=i.templateDirectory?i.templateDirectory+"/":"";r+=i.templateName+".html",o=e(c(r,t)),o.css("opacity",0),o.attr("new",!0),o.on("click",{card:t},function(t){return e(i.cardSelector).removeClass("selected"),o.addClass("selected"),n(t)}),l(o,a),o.imagesLoaded(function(){o.find(".not-loaded").removeClass("not-loaded")})}});for(var a=e(i.cardSelector),o=t.length;o<a.length;o++)e(a[o]).transition({opacity:0},i.animationDuration,function(){e(this).remove()});p.layoutCards(),e(i.cardSelector).imagesLoaded(function(){p.layoutCards()})},layoutCards:function(){var t={};e(i.cardSelector).each(function(n,a){s(e(a),n,t)})},setLoading:function(t){e(i.parentSelector).toggleClass("loading",t),t?r?r.spin(e(i.parentSelector)[0]):n&&(r=new n({length:60,width:15,top:"200px"}).spin(e(i.parentSelector)[0])):r&&r.stop()}};window.MindMeldCards=p}(Handlebars,jQuery,Spinner);
//# sourceMappingURL=cards.js
//# sourceMappingURL=cards.min.js.map