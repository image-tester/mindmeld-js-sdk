!function(n){"use strict";function t(){r=n.listener=new n.Listener({interimResults:!0,onResult:function(n,t,e,o){c.publishEvent("result",n,t,e,o)},onStart:function(n){c.publishEvent("start",n)},onEnd:function(n){c.publishEvent("end",n)},onError:function(n){c.publishEvent("error",n)}})}function e(){var n=u.querySelector(".volume-pulser");s=new window.VolumeMonitor({listener:r,onVolumeChange:function(t){var e=t/100*.5+1;n.style.transform="scale("+e+")"},onStop:function(){n.style.transform="scale(0.9)"},onError:function(n){c.publishEvent("error",n)}})}function o(){function n(){r.listening?c.stop():o=setTimeout(function(){c.start(!0),o=null},i)}function t(){counter++,$("#counter").text(counter),null!==o&&(clearTimeout(o),o=null,c.start())}function e(){clearTimeout(o),o=null}var o=null,i=1e3,s=u.querySelector(".icon-container");s.addEventListener("mousedown",n),s.addEventListener("touchstart",function(t){t.stopPropagation(),t.preventDefault(),n()}),s.addEventListener("mouseup",t),s.addEventListener("touchend",function(n){n.stopPropagation(),n.preventDefault(),t()}),s.addEventListener("mouseout",e),s.addEventListener("touchleave",function(n){n.stopPropagation(),n.preventDefault(),e()})}function i(){c.on("start",function(){u.classList.add("listening"),r.continuous&&u.classList.add("lock")}),c.on("end",function(){u.classList.remove("listening"),u.classList.remove("lock")})}var r,s,u,c=window.MindMeldMicrophone=window.MindMeldMicrophone||{};c.initialize=function(r){if(u=r,!n.support.speechRecognition){u.classList.add("disabled");var s="This browser does not support speech recognition";return c.publishEvent("error",s),void 0}t(),e(),o(),i(),c.publishEvent("init")},c.start=function(n){r.continuous=n,r.start(),s.start()},c.listening=function(){return r.listening},c.stop=function(){r.stop()};var l={};c.on=function(n,t,e){l[n]||(l[n]=[]);var o={callback:t,context:e};l[n].push(o)},c.publishEvent=function(n){var t=l[n];if(void 0!==t){var e=Array.prototype.slice.call(arguments,1);t.forEach(function(n){var t=n.context||this;n.callback.apply(t,e)})}}}(MM);
//# sourceMappingURL=microphone.min.js.map