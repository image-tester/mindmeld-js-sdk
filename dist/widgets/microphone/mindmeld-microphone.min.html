<template id="mindmeld-microphone">
    <!-- inject:css -->
    <style>@-webkit-keyframes mic-listening-pulse{0%{background-color:#2fbbfb}50%{background-color:#0488c0}100%{background-color:#2fbbfb}}@-moz-keyframes mic-listening-pulse{0%{background-color:#2fbbfb}50%{background-color:#0488c0}100%{background-color:#2fbbfb}}@-ms-keyframes mic-listening-pulse{0%{background-color:#2fbbfb}50%{background-color:#0488c0}100%{background-color:#2fbbfb}}@-o-keyframes mic-listening-pulse{0%{background-color:#2fbbfb}50%{background-color:#0488c0}100%{background-color:#2fbbfb}}@keyframes mic-listening-pulse{0%{background-color:#2fbbfb}50%{background-color:#0488c0}100%{background-color:#2fbbfb}}.mindmeld-microphone .icon-container{border-radius:60px;background-color:#2fbbfb;width:60px;height:60px;-webkit-transition:background-color .5s ease-in-out,box-shadow .3s ease-out;-moz-transition:background-color .5s ease-in-out,box-shadow .3s ease-out;-ms-transition:background-color .5s ease-in-out,box-shadow .3s ease-out;-o-transition:background-color .5s ease-in-out,box-shadow .3s ease-out;transition:background-color .5s ease-in-out,box-shadow .3s ease-out;box-shadow:0 0 0 1px rgba(0,0,0,.3) inset}.mindmeld-microphone .icon-container .icon{width:32px;height:32px;fill:#fff;display:block;margin:0 auto;position:relative;-webkit-transition:opacity .3s ease-out;-moz-transition:opacity .3s ease-out;-ms-transition:opacity .3s ease-out;-o-transition:opacity .3s ease-out;transition:opacity .3s ease-out}.mindmeld-microphone .icon-container .mic-icon{opacity:1;top:25%}.mindmeld-microphone .icon-container .mute-icon{opacity:0;top:-28%}.mindmeld-microphone .icon-container .lock-icon{opacity:0;top:-85%}.mindmeld-microphone .icon-container:hover{cursor:pointer;background-color:#0488c0}.mindmeld-microphone.listening .icon-container{box-shadow:0 0 0 8px #333 inset;-webkit-animation:mic-listening-pulse 1.5s infinite;-moz-animation:mic-listening-pulse 1.5s infinite;-ms-animation:mic-listening-pulse 1.5s infinite;-o-animation:mic-listening-pulse 1.5s infinite;animation:mic-listening-pulse 1.5s infinite}.mindmeld-microphone.listening.lock .icon-container .mic-icon{opacity:0}.mindmeld-microphone.listening.lock .icon-container .lock-icon{opacity:1}.mindmeld-microphone.disabled .icon-container{background-color:#aaa}.mindmeld-microphone.disabled .icon-container .mic-icon{opacity:0}.mindmeld-microphone.disabled .icon-container .mute-icon{opacity:1}.mindmeld-microphone.disabled .icon-container:hover{cursor:default}.mindmeld-microphone .volume-pulser{width:60px;height:60px;border-radius:60px;background-color:rgba(0,0,0,.4);transform:scale(0.9);position:relative;bottom:60px;z-index:-1;-webkit-transition:.15s ease-out;-moz-transition:.15s ease-out;-ms-transition:.15s ease-out;-o-transition:.15s ease-out;transition:.15s ease-out}</style>
    <!-- endinject -->
    <div class="mindmeld-microphone">
        <div class="icon-container">
            <svg class="mic-icon icon" x="0px" y="0px" viewbox="0 0 32 32">
                <path d="M16,21.625c2.682,0,4.875-2.25,4.875-5V6.375c0-2.75-2.193-5-4.875-5c-2.682,0-4.875,2.25-4.875,5v10.25  C11.125,19.375,13.318,21.625,16,21.625z M21.876,11.5v5.125c0,3.309-2.636,6-5.876,6s-5.875-2.691-5.875-6V11.5H7.126v5.125  c0,4.443,3.194,8.132,7.372,8.861v2.139h-3.372v3h9.749v-3h-3.376v-2.139c4.181-0.729,7.375-4.418,7.375-8.861V11.5H21.876z"/>
            </svg>
            <svg class="mute-icon icon" x="0px" y="0px" viewbox="0 0 32 32">
                <path d="M10.216,19.019C9.898,18.282,9.72,17.47,9.72,16.614v-5.125H6.721v5.125c0,1.693,0.466,3.275,1.271,4.627  L10.216,19.019z M20.47,8.765V6.364c0-2.75-2.193-5-4.875-5c-2.683,0-4.875,2.25-4.875,5v10.25c0,0.568,0.112,1.105,0.285,1.615  L20.47,8.765z M21.471,13.42v3.195c0,3.308-2.636,6-5.876,6c-0.958,0-1.861-0.24-2.661-0.657l-2.179,2.18  c0.994,0.658,2.123,1.127,3.338,1.354v2.144h-3.372v3h9.749v-3h-3.376v-2.146c4.181-0.729,7.375-4.43,7.375-8.861v-5.139h-1.067  L21.471,13.42z M20.47,16.614V14.42l-6.788,6.788c0.588,0.26,1.233,0.405,1.913,0.405C18.276,21.614,20.47,19.364,20.47,16.614z   M25.637,5.011L4.949,25.698l1.415,1.416L27.051,6.426L25.637,5.011z"/>
            </svg>
            <svg class="lock-icon icon" x="0px" y="0px" viewbox="0 0 100 100">
                <path d="M78.466,41.435h-3.21V21.018C75.256,9.428,64.15,0,50.5,0S25.744,9.428,25.744,21.018h0.001v20.417h-3.21  c-4.394,0-7.989,3.595-7.989,7.989v42.587c0,4.395,3.595,7.989,7.989,7.989h55.931c4.395,0,7.989-3.595,7.989-7.989V49.424  C86.455,45.03,82.86,41.435,78.466,41.435z M57.465,85.805H43.536l2.812-15.02c-2.337-1.41-3.905-3.968-3.905-6.896  c0-4.449,3.608-8.058,8.057-8.058c4.451,0,8.056,3.608,8.056,8.058c0,2.929-1.568,5.486-3.904,6.896L57.465,85.805z M64.646,41.435  H36.354V21.018h0c0-5.642,6.478-10.408,14.146-10.408c7.668,0,14.146,4.767,14.146,10.408V41.435z"/>
            </svg>
        </div>
        <div class="volume-pulser"></div>
    </div>
</template>
<!-- inject:js -->
<script>"use strict";!function(){window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia;var e=window.AudioContext||window.webkitAudioContext,t=window.Uint8Array,n=function(e){this.listener=e,this.stream=null,this.context=null,this.analyzer=null,this.frequencies=null,this.times=null,this.audioStarted=!1};n.prototype.start=function(){function n(e){s.stream=e;var t=s.context.createMediaStreamSource(e);t.connect(s.analyzer),i()}function i(){return s.listener.pending||s.listener.listening?(s.analyzer.getByteFrequencyData(s.frequencies),s.analyzer.getByteTimeDomainData(s.times),s.onVolumeChange&&s.onVolumeChange(o()),window.setTimeout(i,75),void 0):(s.stop(),void 0)}function o(){return window.parseInt(r(0,s.analyzer.frequencyBinCount-1),10)}function r(e,t){for(var n=0,i=e;t>i;i++)n+=s.frequencies[i];return n/(t-e)}var s=this;this.audioStarted?i():(console.log("ZZZ: start audio anew"),this.context=new e,this.analyzer=this.context.createAnalyser(),this.analyzer.smoothingTimeConstant=.18,this.analyzer.fftSize=256,this.frequencies=new t(this.analyzer.frequencyBinCount),this.times=new t(this.analyzer.frequencyBinCount),window.navigator.getUserMedia({audio:!0},n,function(e){console.error("The following error occurred: "+e)}),this.audioStarted=!0)},n.prototype.stop=function(){this.onStop&&this.onStop(),this.stream&&this.stream.stop(),this.audioStarted=!1},window.VolumeMonitor=n}(),function(e){function t(){s=e.activeSession.listener;var t={interimResults:!0,onResult:function(t,n,i,o){e.eventDispatcher.publish("microphoneResult",t,n,i,o)},onStart:function(t){e.eventDispatcher.publish("microphoneStart",t)},onEnd:function(t){e.eventDispatcher.publish("microphoneEnd",t)},onError:function(t){e.eventDispatcher.publish("microphoneError",t)}};e.activeSession.setListenerConfig(t)}function n(){var e=r.querySelector(".volume-pulser");a=new window.VolumeMonitor(s),a.onVolumeChange=function(t){var n=t/100*.5+1;e.style.transform="scale("+n+")"},a.onStop=function(){e.style.transform="scale(0.9)"}}function i(){var e=null,t=1e3,n=r.querySelector(".icon-container");n.addEventListener("mousedown",function(){s.listening?d.stop():e=setTimeout(function(){d.start(!0),e=null},t)}),n.addEventListener("mouseup",function(){null!==e&&(clearTimeout(e),e=null,d.start())}),n.addEventListener("mouseout",function(){clearTimeout(e),e=null})}function o(){e.eventDispatcher.subscribe("microphoneStart",function(){r.classList.add("listening"),s.continuous&&r.classList.add("lock")}),e.eventDispatcher.subscribe("microphoneEnd",function(){r.classList.remove("listening"),r.classList.remove("lock")})}var r,s,a,c=document,u=document._currentScript||document.currentScript,l=u.ownerDocument,d=Object.create(HTMLElement.prototype);d.createdCallback=function(){var e=l.querySelector("#mindmeld-microphone"),t=e.content.cloneNode(!0),n=this.createShadowRoot();n.appendChild(t),r=n.querySelector(".mindmeld-microphone")},d.initialize=function(){if(!e.support.speechRecognition){r.classList.add("disabled");var s="This browser does not support speech recognition";return e.eventDispatcher.publish("microphoneError",s),void 0}t(),n(),i(),o(),e.eventDispatcher.publish("microphoneInit")},d.start=function(e){s.continuous=e,s.start(),a.start()},d.listening=function(){return s.listening},d.stop=function(){s.stop()},c.registerElement("mindmeld-microphone",{prototype:d})}(MM);
//# sourceMappingURL=mindmeld-microphone.min.js.map</script>
<!-- endinject -->

